<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class View | Study With Keshab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body data-theme="default">

    <header>
        <img src="../images/logo.jpg" alt="Logo" class="logo">
        <h1 id="class-title">লোড হচ্ছে...</h1>
    </header>

    <div class="controls-wrapper">
        <div class="theme-buttons">
            <button data-theme-name="default">Default</button>
            <button data-theme-name="forest">Forest</button>
            <button data-theme-name="ocean">Ocean</button>
            <button data-theme-name="sunset">Sunset</button>
            <button data-theme-name="book">Book</button>
        </div>

        <div class="dark-mode-toggle">
            <span id="digital-clock" class="digital-clock">00:00:00</span>
            <label class="switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider"></span>
            </label>
        </div>

        <button id="desktopModeToggle">ডেস্কটপ মোড</button>
    </div>

    <div class="container">
        <div id="class-content">
            <div style="text-align:center; padding:50px;">
                <i class="fa-solid fa-spinner fa-spin" style="font-size:2rem;"></i>
                <p>কন্টেন্ট লোড হচ্ছে...</p>
            </div>
        </div>

        <div class="navigation">
            <a href="../index.html" class="nav-button home-button"><i class="fa-solid fa-house"></i> হোমপেজ</a>
            <div class="class-navigation" id="class-navigation" style="display: none;">
                <button id="prev-class" class="nav-button"><i class="fa-solid fa-arrow-left"></i> পূর্ববর্তী</button>
                <button id="next-class" class="nav-button"><i class="fa-solid fa-arrow-right"></i> পরবর্তী</button>
            </div>
        </div>
    </div>

    <button class="scroll-button" id="scrollToTopBtn"><i class="fa-solid fa-arrow-up"></i></button>
    <button class="scroll-button" id="scrollToBottomBtn"><i class="fa-solid fa-arrow-down"></i></button>

    <footer>
        <p>&copy; <span id="copyright-year"></span> Study With Keshab | সর্বস্বত্ব সংরক্ষিত।</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="../js/firebase-config.js"></script>
    
    <script src="js/script.js"></script>
    <script src="js/class-loader.js"></script>
    <script>
        // Class Navigation Function
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const currentClassId = urlParams.get('id');
            
            if (currentClassId) {
                // Fetch all classes to determine navigation
                firebase.firestore().collection('class_notes')
                    .orderBy('order', 'asc')
                    .get()
                    .then(snapshot => {
                        const classes = [];
                        snapshot.forEach(doc => {
                            classes.push({ id: doc.id, ...doc.data() });
                        });
                        
                        const currentIndex = classes.findIndex(c => c.id === currentClassId);
                        if (currentIndex !== -1 && classes.length > 1) {
                            document.getElementById('class-navigation').style.display = 'flex';
                            
                            const prevBtn = document.getElementById('prev-class');
                            const nextBtn = document.getElementById('next-class');
                            
                            if (currentIndex > 0) {
                                prevBtn.onclick = () => window.location.href = `template.html?id=${classes[currentIndex - 1].id}`;
                            } else {
                                prevBtn.style.opacity = '0.5';
                                prevBtn.disabled = true;
                            }
                            
                            if (currentIndex < classes.length - 1) {
                                nextBtn.onclick = () => window.location.href = `template.html?id=${classes[currentIndex + 1].id}`;
                            } else {
                                nextBtn.style.opacity = '0.5';
                                nextBtn.disabled = true;
                            }
                        }
                    });
            }
        });
    </script>
</body>
</html>